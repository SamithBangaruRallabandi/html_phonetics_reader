<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RMV6FJHHE4"></script>
     <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>

    <!-- Firebase Analytics -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>

    <!-- Firebase Authentication -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <!-- Cloud Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RMV6FJHHE4');
    </script>

    <title>Phonetics Reader</title>

    <link rel="stylesheet" href="style.css">

    
</head>
<body>
    <div class="sticky-header">
        <!-- Add this auth section at the beginning of the sticky header -->
        <div class="auth-section">
            <button id="signInButton" class="auth-btn" style="display: none;">
                Sign in with Google
            </button>
            <div id="userInfo" style="display: none; align-items: center; gap: 8px;">
                <img id="userPhoto" width="30" height="30" style="border-radius: 50%;">
                <span id="userName"></span>
                <button id="signOutButton" class="auth-btn">Sign out</button>
            </div>
        </div>
        
        <div class="control-buttons">
            <button id="toggleSpeakBtn">Speak</button>
            <button id="pauseBtn">Pause</button>
        </div>
        
        <div class="control-group">
            <span class="control-label">Speed:</span>
            <div class="number-control">
                <button class="number-btn" id="speedDown">-</button>
                <input type="number" id="speedInput" min="0.5" max="2" step="0.1" value="1" class="number-input">
                <button class="number-btn" id="speedUp">+</button>
            </div>
        </div>
        
        <div class="control-group">
            <span class="control-label">Word:</span>
            <div class="number-control">
                <button class="number-btn" id="wordDown">-</button>
                <input type="number" id="wordInput" min="0" value="0" step="1" class="number-input">
                <button class="number-btn" id="wordUp">+</button>
            </div>
            <span class="control-label">of</span>
            <span id="totalWords">0</span>
        </div>
        
        <div class="switch-container">
            <span class="control-label">Loop:</span>
            <label class="switch">
                <input type="checkbox" id="loopSwitch">
                <span class="slider"></span>
            </label>
        </div>
    </div>
    
    <div class="main-container">
        <div class="sidebar">
            <div class="output-header">
                <h3>Phonetics Output</h3>
                <div class="toggle-buttons">
                    <button id="ipaBtn" class="toggle-btn">IPA</button>
                    <button id="arpabetBtn" class="toggle-btn">ARPAbet</button>
                    <button id="englishBtn" class="toggle-btn active">English</button>
                </div>
            </div>
            <div id="phoneticsOutput"></div>
            <div class="word-count" id="wordCount">Total words: 0</div>
        </div>
        
        <div class="content-area">
            <h1>Phonetics Reader</h1>
            
            <div class="input-section">
                <textarea id="inputText" placeholder="Enter a sentence to see its phonetics and hear it spoken aloud...">The quick brown fox jumps over the lazy dog. This sentence contains all letters of the English alphabet.</textarea>
                
                <!-- System Prompt Dropdown Section -->
                <div class="system-prompt-section">
                    <div class="section-label">
                        <span>System Prompt</span>
                        <button id="managePromptsBtn" class="text-btn">Manage</button>
                    </div>
                    <select id="promptSelect" class="prompt-select">
                        <option value="autocorrect">Autocorrect this text</option>
                        <option value="dictionary">Define this word</option>
                        <option value="translate">Translate to English</option>
                    </select>
                </div>
                
                <div class="text-controls">
                    <button class="text-btn" id="clearBtn">Clear Text</button>
                    <button class="text-btn" id="pasteBtn">Paste from Clipboard</button>
                    <button class="text-btn" id="microphoneBtn">ðŸŽ¤ Speech Input</button>
                    <button class="text-btn" id="autoCorrectBtn">Apply Prompt</button>
                </div>
                
                <div class="android-warning" id="androidWarning">
                    Optimized for Android Chrome - speaking word by word
                </div>
            </div>
            
            <div class="controls">
                <div class="control-section">
                    <div class="section-label">
                        <span>Volume</span>
                        <span class="value" id="volumeValue">1.0</span>
                    </div>
                    <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="1">
                </div>
                
                <div class="control-section voice-selector">
                    <div class="section-label">
                        <span>Voice</span>
                    </div>
                    <select id="voiceSelect">
                        <option value="">Default</option>
                    </select>
                </div>
                
                <div class="control-section">
                    <div class="word-nav-container">
                        <div class="section-label">
                            <span>Word Navigation</span>
                            <span class="value" id="wordPosition">0/0</span>
                        </div>
                        <input type="range" id="wordSliderFull" class="word-slider" min="0" value="0" step="1" style="flex-grow: 1;">
                    </div>
                    
                    <div class="section-label">
                        <span>Jump by Words</span>
                    </div>
                    <div class="jump-controls">
                        <button class="jump-btn negative" data-words="-10">-10</button>
                        <button class="jump-btn negative" data-words="-9">-9</button>
                        <button class="jump-btn negative" data-words="-8">-8</button>
                        <button class="jump-btn negative" data-words="-7">-7</button>
                        <button class="jump-btn negative" data-words="-6">-6</button>
                        <button class="jump-btn negative" data-words="-5">-5</button>
                        <button class="jump-btn negative" data-words="-4">-4</button>
                        <button class="jump-btn negative" data-words="-3">-3</button>
                        <button class="jump-btn negative" data-words="-2">-2</button>
                        <button class="jump-btn negative" data-words="-1">-1</button>
                        <button class="jump-btn" data-words="1">+1</button>
                        <button class="jump-btn" data-words="2">+2</button>
                        <button class="jump-btn" data-words="3">+3</button>
                        <button class="jump-btn" data-words="4">+4</button>
                        <button class="jump-btn" data-words="5">+5</button>
                        <button class="jump-btn" data-words="6">+6</button>
                        <button class="jump-btn" data-words="7">+7</button>
                        <button class="jump-btn" data-words="8">+8</button>
                        <button class="jump-btn" data-words="9">+9</button>
                        <button class="jump-btn" data-words="10">+10</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="promptsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Manage Custom Prompts</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="custom-prompt-form">
                    <input type="text" id="newPromptName" placeholder="Prompt name" class="modal-input">
                    <textarea id="newPromptText" placeholder="Enter your custom prompt template. Use {text} as placeholder for the input text." class="modal-textarea"></textarea>
                    <button id="addPromptBtn" class="text-btn">Add Prompt</button>
                </div>
                <div class="custom-prompts-list">
                    <h3>Your Custom Prompts</h3>
                    <ul id="customPromptsList"></ul>
                </div>
            </div>
        </div>
    </div>

    <div class="history-section">
        <h3>Your Reading History</h3>

        <!-- Search Box -->
        <input type="text" id="searchHistory" placeholder="Search history...">

        <!-- History List -->
        <ul id="historyList"></ul>

        <div class="history-controls">
            <button id="refreshHistoryBtn">Refresh History</button>
            <button id="clearHistoryBtn">Clear All History</button>
        </div>
    </div>
        
    <div id="publishModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
            <h2>Publish Read</h2>
            <span class="close">&times;</span>
            </div>
            <div class="modal-body">
            <p id="publishTextPreview"></p>
            
            <!-- Class Selector -->
            <label for="publishClass">Class/Category:</label>
            <select id="publishClass">
                <option value="general">General</option>
                <option value="english">English</option>
                <option value="phonetics">Phonetics</option>
                <option value="linguistics">Linguistics</option>
            </select>

            <!-- Tags Input -->
            <label for="publishTags">Tags (comma separated):</label>
            <input type="text" id="publishTags" placeholder="e.g., vowels, IPA, practice">

            <!-- Publish Button -->
            <button id="confirmPublishBtn">Publish</button>
            </div>
        </div>
    </div>

    <div class="community-section">
        <h3>Community Reads</h3>

        <!-- Filters -->
        <div class="community-filters">
            <label for="filterClass">Class:</label>
            <select id="filterClass">
                <option value="">All</option>
                <option value="english">English</option>
                <option value="phonetics">Phonetics</option>
                <option value="linguistics">Linguistics</option>
            </select>

            <label for="filterDate">Date Range:</label>
            <input type="date" id="filterStart"> to 
            <input type="date" id="filterEnd">

            <label for="filterTags">Tags:</label>
            <input type="text" id="filterTags" placeholder="comma separated">
            
            <button id="applyFiltersBtn">Apply Filters</button>
        </div>

        <!-- Published Reads List -->
        <ul id="communityList"></ul>
    </div>

    
    <script src="script.js"></script>
</body>
</html>